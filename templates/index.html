<!doctype html>

{% macro lang_option(lang_name, current_lang) %}
    <option value="{{ lang_name }}" {{ 'selected' if current_lang == lang_name else '' }}>{{ lang_name }}</option>
{% endmacro %}

{% macro supported_lang_options(current_lang) %}
    {% for lang_name in supported_languages.keys() %}
        {{ lang_option(lang_name, current_lang) }}
    {% endfor %}
{% endmacro %}


<html>
    <head>
        <title>SimplyTranslate</title>
        <link rel="stylesheet" href="/static/style.css">
        <meta name="description" content="Experience simple and private Google translations">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta charset="UTF-8">
    </head>

    <body>

        <center>
            <h2>SimplyTranslate</h2>
        </center>

        <form action="/?engine={{ engine }}" method="POST">

            <!-- engine buttons -->
            <center>
                <p>Translation Engine <a href="/?engine=google&typingiscool={{ use_text_fields }}">Google</a> | <a href="/?engine=libre&typingiscool={{ use_text_fields }}">Libre</a></p>
            </center>
            
            <!-- from and to language -->
            <div id="wrap">
                <div class="language">
                    <select name="from_language" id="from_language">
                        {{ lang_option('Autodetect', from_l) }}
                        {{ supported_lang_options(from_l) }}
                    </select>
                </div>

                <div class="switch_languages">
                    <button id="switchbutton" title="Switch input and output languages" formaction="/switchlanguages/?engine={{ engine }}&typingiscool={{ use_text_fields }}" type="submit"><-></button>
                </div>

                <div class="language">
                    <select name="to_language" id="to_language">
                        {{ supported_lang_options(to_l) }}
                    </select>
                </div>
            </div>

            <!-- text boxes -->
            <div id="wrap">
                <textarea autofocus class="item" id="input" name="input"  placeholder="Enter Text Here">{{ inp }}</textarea>
                {% if translation == None %}
                    <textarea class="translation item" placeholder="Translation" readonly></textarea>
                {% else %}
                    <textarea class="translation item" placeholder="Translation" readonly>{{ translation }}</textarea>
                {% endif %}

            </div>


            <center>
                <!-- translate button -->
                <button type="submit">Translate with {{ engine }}!</button>

                <br>
                <!-- link to share translation -->
                <a href="/?engine={{ engine }}&text={{ inp|urlencode }}&sl={{ from_l_code }}&tl={{ to_l_code }}">Copy this link to share this translation with others</a>
            </center>

        </form>

        <br>
        <br>
        <br>
        
        <footer>
            <center>
                <a href="/about">About</a>
            </center>
        </footer>
    </body>
</html>
